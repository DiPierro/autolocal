<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <meta charset="utf-8" />
    <script src="jquery-3.1.1.min.js"></script>
    <script src="knockout-3.4.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {

            var customerDetailsViewModel = function() {
                var self = this;

			          self.id = ko.observable("");
                self.SuccessMessage = ko.observable("");
                
            self.unsubscribe = function () {

				          var CustomerDetail = {
				                id: self.id(),
				          }
        $.ajax({
            url: 'https://cors-anywhere.herokuapp.com/https://9k2fkcj7pb.execute-api.us-west-1.amazonaws.com/beta/unsubscribeQuery',
            cache: false,
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: ko.toJSON(CustomerDetail),
            success: function (data) {
              self.SuccessMessage(data)
							       self.id('');
            }
					}).fail(
                  function(xhr, textStatus, err){
					               alert("Error happened "+err);
                  });
            };
        }

            var viewModel = new customerDetailsViewModel();
            ko.applyBindings(viewModel);
         });


    </script>
</head>
<div class="container">
  <form id="contact" action="" method="post">
    <h3>CityCouncilor</h3>
    <h4>
      <a href="about.html">About</a> |
      <a href="signup.html">Sign Up</a> |
      <a href="unsubscribe.html">Unsubscribe</a>
    </h4>
    <h4>To unsubscribe from all email, please enter your email address below.</h4>
    <fieldset>
      <input placeholder="Your Email Address" type="email" tabindex="1" data-bind='value: id' required>
    </fieldset>
    <fieldset>
      <button name="submit" type="submit" id="email-submit" data-submit="...Sending" data-bind="click: $root.unsubscribe" > Unsubscribe from All Email </button>
      <span style ="color: darkolivegreen" data-bind='text : SuccessMessage' />
    </fieldset>
  </form>
</div>
</html>
