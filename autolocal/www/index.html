<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>CityCouncilor</title>
		<link rel="stylesheet" href="main.css" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<script src="jquery-3.1.1.min.js"></script>
    <script src="knockout-3.4.2.js"></script>
		<script type="text/javascript">
        $(document).ready(function() {
            var customerDetailsViewModel = function() {
                var self = this;
			          self.id = ko.observable("");
								self.id2 = ko.observable("");
                self.keywords = ko.observableArray("");
                self.SuccessMessage = ko.observable("");
                self.municipalities = ko.observableArray([]);
								self.unsubscribe = function () {
						          var CustomerDetail = {
						                email_address: self.id2(),
						          }
		        $.ajax({
		            url: 'https://cors-anywhere.herokuapp.com/https://9k2fkcj7pb.execute-api.us-west-1.amazonaws.com/prod/unsubscribeQuery',
		            cache: false,
		            type: 'POST',
		            contentType: 'application/json; charset=utf-8',
		            data: ko.toJSON(CustomerDetail),
		            success: function (data) {
		              self.SuccessMessage(data["body"])
									       self.id2('');
		            }
							}).fail(
		                  function(xhr, textStatus, err){
							               alert("Error happened "+err);
		                  });
		            };
						self.POSTautoLocalNews = function () {
                  var failed = false;
                  var the_municipalities = [];
                  checkboxes = document.getElementsByName('foo');
                  for(var i=0, n=checkboxes.length;i<n;i++) {
                    if(checkboxes[i].checked == true) {
                      the_municipalities.push(checkboxes[i].value);
                    }
                  }
				          var CustomerDetail = {
				                email_address: self.id(),
				                keywords: self.keywords().split(','),
                        municipalities: the_municipalities,
				          }
        $.ajax({
            url: 'https://cors-anywhere.herokuapp.com/https://2nr3b6lltj.execute-api.us-west-1.amazonaws.com/prod/subscribeQuery',
            cache: false,
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: ko.toJSON(CustomerDetail),
            success: function (data) {
              self.SuccessMessage(data["body"])
							       self.id('');
							       self.keywords('');
                     self.municipalities('');
            }
					}).fail(
                  function(xhr, textStatus, err){
                         failed = true;
					               alert("Error happened "+err);
                  });
                  //if(failed==false)window.location.href = "landing.html";
            };
        }
            var viewModel = new customerDetailsViewModel();
            ko.applyBindings(viewModel);
         });
    </script>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<section id="header">
				<header>
					<h1 id="logo"><a href="#">CityCouncilor</a></h1>
					<p>Supporting local journalists to uncover stories</p>
				</header>
				<nav id="nav">
					<ul>
						<li><a href="#first" class="active">About</a></li>
						<li><a href="#second">Signup</a></li>
						<li><a href="#third">Unsubscribe</a></li>
						<li><a href="#fourth">Contact</a></li>
					</ul>
				</nav>
				<footer>
					<ul class="icons">
						<li><a href="https://github.com/chris-stock/autolocal" class="icon brands fa-github"><span class="label">Github</span></a></li>
					</ul>
				</footer>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">

						<!-- One -->
							<section id="first">
								<div class="image main" data-position="center">
									<img src="Map.png" alt="" />
								</div>
								<div class="container">
									<header class="major">
										<h2>Welcome to CityCouncilor</h2>
										<p>A tool to help journalists track and discover public meetings across city governments. </p>
									</header>
									<p>To sign up, journalists can enter keywords (eg. homelessness, wildfires, etc.) and geographic locations of interest, and CityCouncilor will send an email alert whenever an upcoming meeting agenda with relevant information comes up.</p>
									<p>CityCouncilor is a project created out of Stanford University's Exploring Computational Journalism course. The creators of this project are Chris Stock, Erin Bennett, Holden Foreman, and Patricia Wei. We are advised by Stanford professors in both Journalism and Computer Science: RB Brenner, Krishna Bharat, Maneesh Agrawala, and Cheryl Phillips.
									</p>
									<h3>Our story</h3>
									<p>In our conversations with local journalists and data journalists, many of them told us that because local newsrooms must do a lot with little resources, it is difficult to keep track of stories. Important stories can often get lost among the many documents of the several committees within a local government.
									</p>
									<p> One journalist we talked to told us that her publication nearly missed an important story on a school board corruption case because there was no one keeping track of it. <b> We hope that through our app, journalists can find a way to keep track of the wide range of stories happening in their communities.</b>
									</p>
									<p> We also hope that through CityCouncilor, journalists can discover new stories. For example, we hope that CityCouncilor will allow journalists to explore other geographical locations and/or committees they otherwise would not normally look at to find patterns and trends in the issues they care about.
									</p>
								</div>
							</section>

						<!-- Two -->
							<section id="second">
								<div class="container">
									<form id="contact" action="" method="post">
								    <h3>CityCouncilor</h3>
								    <h4>Stay informed of city meetings, agendas, and staff reports. Enter search keywords and geographic regions below to sign up for email alerts. </h4>
										<form method="post" action="#">
											<div class="row gtr-uniform">
												<div class="col-6 col-12-xsmall"><input type="email" name="name" id="name" placeholder="Your Email Address" tabindex="1" data-bind='value: id' required/></div>
												<div class="col-6 col-12-xsmall"><input type="text" name="email" id="email" placeholder="Keywords (separated by commas)" tabindex="2" data-bind='value: keywords' required/></div>

												<script language="JavaScript">
										      function toggle(source) {
										        checkboxes = document.getElementsByName('foo');
										        for(var i=0, n=checkboxes.length;i<n;i++) {
										          checkboxes[i].checked = source.checked;
										        }
										      }
										    </script>

												<h3>Area(s) of interest</h3>
												<div>
												<label class="container1">Select All
  												<input type="checkbox" onClick="toggle(this)">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Alameda
  												<input type="checkbox" name="foo" value="Alameda">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Burlingame
  												<input type="checkbox" name="foo" value="Burlingame">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Cupertino
  												<input type="checkbox" name="foo" value="Cupertino">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Hayward
  												<input type="checkbox" name="foo" value="Hayward">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Hercules
  												<input type="checkbox" name="foo" value="Hercules">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Metropolitan Transportation Commission
  												<input type="checkbox" name="foo" value="Metropolitan Transportation Commission">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Mountain View
  												<input type="checkbox" name="foo" value="Mountain View">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Oakland
  												<input type="checkbox" name="foo" value="Oakland">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">San Francisco
  												<input type="checkbox" name="foo" value="San Francisco">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">San Jose
  												<input type="checkbox" name="foo" value="San Jose">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">San Leandro
  												<input type="checkbox" name="foo" value="San Leandro">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">San Mateo County
  												<input type="checkbox" name="foo" value="San Mateo County">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Santa Clara
  												<input type="checkbox" name="foo" value="Santa Clara">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">South San Francisco
  												<input type="checkbox" name="foo" value="South San Francisco">
  												<span class="checkmark"></span>
												</label>
												<label class="container1">Stockton
  												<input type="checkbox" name="foo" value="Stockton">
  												<span class="checkmark"></span>
												</label>

												<div class="col-12">
													<ul class="actions">
														<li><input type="submit" class="primary" id="contact-submit" data-submit="...Sending" data-bind="click: $root.POSTautoLocalNews" value="Subscribe" /></li>
														<span style ="color: darkolivegreen" data-bind='text : SuccessMessage' />
													</ul>
												</div>

											</div>

											</div>
										</form>

								  </form>
								</div>
							</section>

							<section id="third">
								<div class="container">
									<form id="contact2" action="" method="post">
										<h3>Unsubscribe</h3>
										<h4>To unsubscribe from all email, please enter your email address below.</h4>
										<div class="row gtr-uniform">
											<div class="col-6 col-12-xsmall"><input placeholder="Your Email Address" type="email" data-bind='value: id2' required></div>
											<div class="col-12">
												<ul class="actions">
													<li><input type="submit" class="primary" id="email-submit" value="Unsubscribe" data-submit="...Sending" data-bind="click: $root.unsubscribe"/></li>
													<span style ="color: darkolivegreen" data-bind='text : SuccessMessage' />
												</ul>
											</div>
										</div>

								</div>
							</section>

						<!-- Four -->
							<section id="fourth">
								<div class="container">
									<h3>Contact the Team</h3>
									<p>We would love to hear from you! Contact us if you have any questions or if you would like to chat about the intersection of Journalism and Computer Science. </p>

									<p>Email us at <b> contact@citycouncilor.com.</b>
									</p>
								</div>
							</section>

					</div>

				<!-- Footer -->
					<section id="footer">
						<div class="container">
							<ul class="copyright">
								<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="jquery.min.js"></script>
			<script src="jquery.scrollex.min.js"></script>
			<script src="jquery.scrolly.min.js"></script>
			<script src="browser.min.js"></script>
			<script src="breakpoints.min.js"></script>
			<script src="util.js"></script>
			<script src="main.js"></script>

	</body>
</html>
